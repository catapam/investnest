{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- Extra CSS block for dashboard styles and external libraries -->
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

    <!-- Bootstrap datepicker -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" rel="stylesheet">
    
    {% block extra_css_dashboard %}
    <!-- Child templates can add their own CSS here -->
    {% endblock extra_css_dashboard %}
{% endblock extra_css %}

<div class="dashboard-container">
    <!-- Sidebar with ARIA role for navigation -->
    <nav class="sidebar" id="sidebar" aria-label="Dashboard Navigation">
        <ul class="menu-list .navbar-nav">
            <div class="top-menu-dashboard">
                <!-- Accessible menu items with aria-label for clarity -->
                <li>
                    <a href="/dashboard/" class="menu-item nav-link" aria-label="Main Dashboard">
                        <i class="fas fa-home" aria-hidden="true"></i>
                        <span class="menu-text">Main</span>
                    </a>
                </li>
                <li>
                    <a href="/portfolio/" class="menu-item nav-link" aria-label="Portfolio">
                        <i class="fa-solid fa-briefcase" aria-hidden="true"></i>
                        <span class="menu-text">Portfolio</span>
                    </a>
                </li>
                <li>
                    <a href="/metrics/" class="menu-item nav-link" aria-label="Metrics">
                        <i class="fa-solid fa-chart-simple" aria-hidden="true"></i>
                        <span class="menu-text">Metrics</span>
                    </a>
                </li>
                <li>
                    <a href="/accounts/" class="menu-item nav-link" aria-label="Account">
                        <i class="fa-regular fa-user" aria-hidden="true"></i>
                        <span class="menu-text">Account</span>
                    </a>
                </li>
                <li>
                    <a href="/contact/" class="menu-item nav-link" aria-label="Contact">
                        <i class="fa-regular fa-envelope" aria-hidden="true"></i>
                        <span class="menu-text">Contact</span>
                    </a>
                </li>
                <div class="empty-area"></div>
            </div>

            <div class="bottom-menu-dashboard">
                {% if request.user.is_staff %}
                <li>
                    <a href="/operations/" class="menu-item nav-link" aria-label="Operations">
                        <i class="fa-solid fa-people-group" aria-hidden="true"></i>
                        <span class="menu-text">Operations</span>
                    </a>
                </li>
                {% endif %}

                {% if request.user.is_superuser %}
                <li>
                    <a href="/admin/" target="_blank" class="menu-item admin-access nav-link" aria-label="Admin">
                        <i class="fa-solid fa-unlock" aria-hidden="true"></i>
                        <span class="menu-text">Admin</span>
                    </a>
                </li>
                {% endif %}

                <li>
                    <a href="/accounts/logout/" class="menu-item logout-dashboard nav-link" aria-label="Logout">
                        <i class="fa-solid fa-right-from-bracket" aria-hidden="true"></i>
                        <span class="menu-text">Logout</span>
                    </a>
                </li>
            </div>
        </ul>

        <!-- Toggle button for the sidebar, with aria-controls for accessibility -->
        <button class="toggle-btn" id="toggle-btn" aria-controls="sidebar" aria-expanded="false">
            <i class="fas fa-arrow-left" aria-hidden="true"></i>
            <span class="visually-hidden">Toggle Sidebar</span>
        </button>
    </nav>

    <!-- Main content area -->
    <div class="dashboard-content" id="dashboard-content">
        {% if intra_menu %}
        {% include 'dashboard/includes/intra-menu.html' %}
        {% endif %}

        {% block dashboard_content %}
        <!-- Dashboard-specific content goes here -->
        {% endblock dashboard_content %}
    </div>
</div>

<!-- Extra JS block for dashboard scripts -->
{% block extra_js %}
    <!-- jQuery (loading deferred to avoid blocking) -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" defer></script>
    <!-- Bootstrap datepicker JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" defer></script>

    <!-- Dashboard specific JS -->
    <script src="{% static 'js/dashboard.js' %}" defer></script>

    {% block extra_js_dashboard %}
    <!-- Child templates can add their own JS here -->
    {% endblock extra_js_dashboard %}
{% endblock extra_js %}

{% endblock content %}
